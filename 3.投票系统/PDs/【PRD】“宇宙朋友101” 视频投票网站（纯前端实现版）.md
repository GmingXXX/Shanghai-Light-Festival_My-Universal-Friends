# **【PRD】“宇宙朋友101” 视频投票网站（纯前端实现版）

## 1. 项目概述

### 1.1 项目目标

创建一个简单、可快速部署、无需服务器的单页面视频投票网站。让用户可以在本地或通过分享文件的方式，对自己设备上的视频进行浏览和投票，并查看个人投票记录。

### 1.2 核心特性

- **零依赖：** 纯HTML, CSS, JavaScript，无需服务器环境。
- **本地持久化：** 使用`localStorage`记录用户个人的投票历史。
- **动态展示：** 从预设的视频列表中随机抽取并展示作品。
- **友好交互：** 简洁直观的界面，流畅的投票体验。

## 2. 功能需求 (Functional Requirements)

### FR-1: 投票主页

#### FR-1.1 页面基本信息

- **网页标题 (Title):** `宇宙朋友101：为你心动的TA投票！`
- **页面说明文字 (Description):** `欢迎来到我的宇宙朋友画廊！请为你最喜欢的1-3位宇宙朋友投上宝贵的一票。`

#### FR-1.2 设计风格

- **主风格：** UI活泼、可爱且具有科技感。
- **色彩：** 深色宇宙背景搭配明亮的霓虹色点缀。
- **布局：** 响应式网格布局，展示20个视频卡片。

#### FR-1.3 视频展示模块

- **视频源：** 视频文件（.webm格式）需与HTML文件放在同一目录下（或子目录，如 `videos/`）。
- **播放状态：** 视频 `<video>` 标签需设置 `autoplay`, `loop`, `muted` 属性，实现自动、循环、静音播放。
- **卡片内容：**
  - 视频播放器。
  - 作品编号：显示视频的文件名前缀。
  - 投票按钮：“投TA一票”。

#### FR-1.4 投票交互逻辑 (JavaScript实现)

- **选择机制：**
  - 用户可点击1-3个“投TA一票”按钮进行选择。
  - 通过JavaScript动态添加/移除一个CSS类（如 `.selected`）来改变按钮样式。
  - 当选择数量达到3时，禁用其他未选择的按钮。取消选择后，再恢复按钮可用状态。
- **提交投票：**
  - 页面固定位置（如底部）有一个“**确认提交我的投票**”按钮，当有选择时激活。
  - 点击提交后，JavaScript将执行以下操作：
    1. 读取 `localStorage` 中已有的票数数据。
    2. 为本次选择的每个视频票数+1。
    3. 将更新后的数据写回 `localStorage`。
- **投票后反馈：**
  - 弹出一个提示：“投票成功！页面即将刷新，展示新的朋友们！”
  - 提示消失后，**JavaScript重新执行随机抽取函数**，并刷新页面上的20个视频卡片，无需重新加载整个页面。

### FR-2: 视频配置与随机加载机制

- **视频列表配置：** 在JavaScript代码中，需要有一个数组来手动定义所有视频文件的路径。

  <JAVASCRIPT>

  ```
  // 用户需要在这里手动配置所有的视频文件名const ALL_VIDEOS = [    'videos/CosmicFriend_001.webm',    'videos/CosmicFriend_002.webm',    'videos/Stardust_Explorer.webm',    'videos/Galaxy_Dancer.webm',    // ... 添加所有视频文件的路径];
  ```

- **随机抽取逻辑 (JavaScript实现)：**

  - 页面加载或投票完成后，调用一个函数。
  - 该函数会打乱 `ALL_VIDEOS` 数组的顺序，然后取出前20个元素。
  - 根据这20个文件名，动态生成HTML代码来创建视频卡片并插入到页面中。

### FR-3: 票数统计与本地存储

#### FR-3.1 入口

- 页面上设置一个“**查看票数统计**”按钮。

#### FR-3.2 统计界面

- **展现形式：** 点击按钮后，以**模态框（Modal）或全屏浮层**的形式在当前页面展示，避免页面跳转。
- **数据来源 (JavaScript实现)：**
  - JavaScript从 `localStorage` 中读取票数数据。数据建议以JSON对象格式存储，键为视频文件名，值为票数。
  - 示例 `localStorage` 中的数据： `'voteData': '{"videos/CosmicFriend_001.webm": 5, "videos/Stardust_Explorer.webm": 12}'`
- **数据显示：**
  - 动态生成一个表格，展示所有**投过票的**视频及其票数。
  - 表格按票数降序排列。
- **重置功能：**
  - 统计界面内提供“**重置我的投票记录**”按钮。
  - 点击后弹出二次确认框。
  - 用户确认后，JavaScript将通过 `localStorage.removeItem('voteData')` 或 `localStorage.clear()` 来清除存储的投票数据，并刷新统计视图。

## 3. 技术实现核心

- **HTML:** 语义化的结构，包含一个用于承载视频网格的容器，以及统计模态框的骨架。
- **CSS:** Flexbox或Grid布局实现响应式网格。使用CSS变量定义主题色。实现按钮状态、卡片和模态框的样式。
- **JavaScript (Vanilla JS, 无框架):**
  - **核心逻辑：**
    1. 定义视频列表数组 `ALL_VIDEOS`。
    2. 编写 `displayRandomVideos()` 函数：随机抽取20个视频并渲染到页面。
    3. 事件监听：为投票按钮、提交按钮、统计按钮、重置按钮绑定点击事件。
    4. 编写 `handleVote()` 函数：处理投票选择逻辑（最多3个）。
    5. 编写 `submitVote()` 函数：读取、更新并写回 `localStorage`，然后调用 `displayRandomVideos()`。
    6. 编写 `showStats()` 函数：读取 `localStorage`，动态生成并显示统计表格。
    7. 编写 `resetStats()` 函数：清除 `localStorage` 中的数据。
  - **入口函数：** 页面加载完成后，立即调用 `displayRandomVideos()` 初始化。

## 4. 用户流程图 (纯前端版)

```
Syntax error in textmermaid version 11.4.0
```

## 5. 使用与部署说明

1. **文件结构:**

   <TEXT>

   ```
   /宇宙朋友101投票/|-- index.html       (主文件)|-- style.css        (样式文件, 可选)|-- script.js        (逻辑文件, 可选)|-- /videos/         (存放所有.webm视频的文件夹)|   |-- video1.webm|   |-- video2.webm|   |-- ...
   ```

2. **配置:** 打开 `script.js` (或 `index.html` 中的 `<script>` 标签)，找到 `ALL_VIDEOS` 数组，将你所有视频文件的**正确相对路径**填入其中。

3. **运行:** 直接在电脑上用浏览器（推荐Chrome或Firefox）打开 `index.html` 文件即可开始使用。

4. **分享:** 将整个 `宇宙朋友101投票` 文件夹打包成ZIP文件，分享给他人。对方解压后即可同样使用，但他们的投票记录与你无关。