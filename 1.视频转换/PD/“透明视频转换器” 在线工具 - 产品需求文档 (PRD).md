# **“透明视频转换器” 在线工具 - 产品需求文档 (PRD)**

## **1. 文档概述**

- **产品名称：** 透明视频转换器 (AlphaVid Converter)
- **版本号：** V1.0
- **撰写日期：** 2025年09月16日
- **目标：** 开发一个简单、高效的在线Web工具，帮助用户将带有黑色（或纯色）背景的视频转换为带有Alpha通道的透明背景视频，并支持单张及批量处理与下载。

------

## **2. 产品背景与目标用户**

- **市场问题 (Problem):**
  - 设计师和视频创作者经常需要将特效素材（如火焰、烟雾、粒子效果）叠加到其他视频上，这些素材通常是黑底的。
  - 传统视频编辑软件（如After Effects）操作复杂、学习成本高，不适合轻度用户。
  - 市面上缺乏专注、易用、支持批量处理的在线转换工具。
  - 将黑底视频转为透明底并导出为支持Alpha通道的格式（如WebM, MOV）是一个普遍但繁琐的需求。
- **目标用户 (Target Audience):**
  - **UI/UX设计师：** 需要在网页或App中嵌入动态透明元素。
  - **社交媒体运营/营销人员：** 制作动态贴纸、GIF或吸引眼球的短视频内容。
  - **独立开发者/前端工程师：** 需要在Web项目中实现复杂的动态视觉效果。
  - **轻度视频创作者：** 快速处理视频素材，用于Vlog或短视频剪辑。
- **产品价值 (Value Proposition):**
  - **简单易用：** 无需专业知识，浏览器内一键完成转换。
  - **高效批量：** 支持同时处理多个视频，节省重复劳动时间。
  - **Web友好：** 直接输出适用于网页的WebM格式，体积小，效果好。
  - **免费便捷：** 提供基础的免费服务，降低用户使用门槛。

------

## **3. 产品功能详述 (Features)**

### **3.1 核心功能 - 视频处理流程**

#### **3.1.1 文件上传模块**

- **功能描述：** 用户上传需要处理的视频文件。
- **需求细则：**
  1. **上传方式：**
     - 支持点击按钮选择文件。
     - 支持拖拽文件到指定区域上传。
     - 支持多文件同时选择或拖拽。
  2. **文件格式支持：** 初始版本支持最常见的 `.mp4`, `.mov`, `.webm`。
  3. **文件限制 (V1.0)：**
     - **大小限制：** 单个文件不超过 `50MB`。
     - **数量限制：** 单次批量上传不超过 `10` 个文件。
     - **时长限制：** 单个视频时长不超过 `30` 秒。
  4. **界面反馈：**
     - 上传时显示进度条和百分比。
     - 上传成功后，在文件列表中显示视频缩略图、文件名、大小、时长。
     - 上传失败（格式/大小/数量超限）时，给予清晰的错误提示。

#### **3.1.2 转换参数设置模块 (V1.0可作为高级选项)**

- **功能描述：** 用户可以对转换效果进行微调。为简化V1.0流程，可将此模块默认隐藏。
- **需求细则：**
  1. **背景色选择：**
     - 默认移除纯黑色 (`#000000`)。
     - 提供颜色拾取器，允许用户指定要移除的背景颜色。
  2. **抠像容差 (Tolerance) 调整：**
     - 提供一个滑动条（0-100），让用户调整颜色匹配的灵敏度。
  3. **边缘平滑 (Feather) 调整：**
     - 提供一个滑动条（0-10），用于柔化抠像后的边缘。
  4. **应用范围：**
     - 用户可以选择将设置“应用于所有视频”或“仅应用于当前视频”。

#### **3.1.3 处理与预览模块**

- **功能描述：** 系统在后台处理视频，并提供预览。
- **需求细则：**
  1. **处理队列：** 用户点击“开始转换”后，所有上传的视频进入处理队列。
  2. **状态显示：** 每个视频文件卡片上应实时显示其状态：“待处理”、“处理中...”、“处理完成”、“失败”。
  3. **实时预览 (核心体验)：**
     - 处理完成后，视频卡片上出现一个预览窗口。
     - 预览窗口背景应为棋盘格，直观判断透明效果。
     - 视频可循环播放，用户可以点击播放/暂停。
  4. **失败处理：** 若处理失败，应显示失败原因，并允许用户移除或重试。

#### **3.1.4 下载模块**

- **功能描述：** 用户下载转换后的透明视频。
- **需求细则：**
  1. **输出格式：**
     - **主要格式：** `.webm` (VP8/VP9编码)，支持Alpha通道，适合Web。
     - **可选格式 (V1.5)：** `.mov` (带Alpha通道), APNG, GIF。
  2. **单张下载：** 每个处理完成的视频卡片上都有一个“下载”按钮。
  3. **批量下载：**
     - 提供一个“全部下载”按钮。
     - 点击后，将所有处理完成的视频打包成一个 `.zip` 文件下载。
  4. **清空操作：** 提供“全部清除”按钮，方便用户开始新的任务。

### **3.2 非功能性需求**

- **性能：**
  - **处理速度：** 后端处理应尽可能快，一个10秒720p视频处理时间争取在30秒内。
  - **并发处理：** 系统应能支持一定数量的用户同时进行处理任务。
- **用户体验 (UX)：**
  - 界面简洁直观，流程清晰，有明确的视觉反馈。
  - 网站加载速度快，响应灵敏。
  - 适配桌面浏览器，移动端做基本兼容。
- **隐私与安全：**
  - 在网站显著位置声明隐私政策。
  - 明确告知用户，上传的文件会在处理后的一段时间内（如24小时）自动删除。
- **兼容性：**
  - 支持主流现代浏览器：Chrome, Firefox, Safari, Edge。

------

## **4. 页面与流程设计**

### **4.1 用户流程图 (User Flow)**

1. **进入网站** -> 看到主上传区域
2. **用户拖拽/选择文件** -> 文件进入上传列表，显示上传进度
3. **上传完成** -> 文件列表展示视频信息，"开始转换"按钮可用
4. **(可选) 用户点击某个视频，展开高级设置** -> 调整容差、颜色等参数
5. **用户点击"开始转换"** -> 所有视频状态变为"处理中..."
6. **系统后台处理** -> 视频逐一完成，状态变为"处理完成"，并显示预览
7. **用户预览效果** -> 满意
8. **用户点击单个"下载"** 或 **点击"全部下载"** -> 获取文件/压缩包
9. **用户点击"全部清除"** -> 回到初始状态

### **4.2 页面线框图 (Wireframe)**

- **顶部导航栏 (Header):**
  - Logo & 产品名称
  - 链接: "如何使用?", "FAQ"
- **核心操作区 (Main Section):**
  - **上传框：**
    - 大标题：“将黑底视频转为透明背景”
    - 副标题：“支持MP4, MOV, WebM格式，最高10个文件，每个50MB以内”
    - 醒目的“选择文件”按钮及拖拽区域提示。
- **文件处理列表 (File List Area):** (上传后出现)
  - 以卡片形式展示每个视频。
  - **卡片内容：** 缩略图、文件名、文件大小、状态、操作按钮（移除/下载）。
  - **列表顶部操作栏：** “开始转换”、“全部下载”、“全部清除”按钮。
- **页脚 (Footer):**
  - 版权信息 & 隐私政策链接。

------

## **5. 技术实现思路**

- **前端 (Frontend):**

  - **框架：** `React.js` / `Vue.js`
  - **文件上传：** `axios` + `FormData`
  - **UI库：** `Ant Design`, `Material-UI` 或 `Element Plus`
  - **状态管理：** 通过API轮询获取后端处理状态并更新UI。

- **后端 (Backend):**

  - **语言/框架：** `Python` + `Flask`/`Django` (推荐) 或 `Node.js` + `Express`。

  - **核心视频处理库：** **FFmpeg** 是不二之选。

    - **关键命令思路:** 利用FFmpeg的`colorkey`或`chromakey`滤镜。

    <BASH>

    ```
    # 示例: 将input.mp4中的黑色背景变透明，并输出为带Alpha通道的WebM文件ffmpeg -i input.mp4 -vf "colorkey=color=black:similarity=0.1:blend=0.05" -c:v libvpx-vp9 -auto-alt-ref 0 -an output.webm
    ```

    - `color`: 对应前端的颜色选择器。
    - `similarity`: 对应前端的“容差”滑块。
    - `blend`: 对应前端的“边缘平滑”滑块。
    - `-an`: 移除音频轨道，减小文件体积。

  - **任务队列：** **必须使用**，以处理耗时的视频转码任务。

    - **技术选型：** `Redis` + `Celery` (Python) 或 `RabbitMQ` + `BullMQ` (Node.js)。

  - **API设计：**

    - `POST /api/upload`: 上传文件，返回任务ID。
    - `GET /api/status?taskId=...`: 查询任务状态。
    - `GET /api/download?fileId=...`: 下载处理完成的文件。

- **服务器与存储 (Deployment):**

  - **平台：** AWS (EC2 + S3), Google Cloud, Vercel/Netlify (前端) + Heroku/Render (后端)。
  - **存储：** 使用云存储（如AWS S3）存放临时文件，并配置生命周期规则自动删除过期文件。

------

## **6. V1.0之后的迭代计划 (Roadmap)**

- **V1.1 (体验优化):**
  - 支持更多输入/输出格式（如`GIF`, `APNG`）。
  - 优化移动端交互体验。
  - 提供处理前后的效果对比预览功能。
- **V1.2 (功能增强):**
  - **反向操作：** 将带Alpha通道的视频转换为指定纯色背景的视频。
  - **绿幕/蓝幕抠像：** 增加专门针对绿幕/蓝幕优化的`chromakey`算法。
  - **视频裁剪/尺寸调整：** 在转换前提供简单的编辑功能。
- **V2.0 (商业化探索):**
  - **用户系统：** 引入登录/注册，保存用户处理历史。
  - **付费方案 (Freemium Model):**
    - **免费版：** 保留当前限制，可能带水印。
    - **付费版：** 解除限制（文件大小、数量、时长）、无水印、更快的处理队列、云存储空间等。
  - **API服务：** 为开发者提供API，让他们可以在自己的应用中付费集成此功能。